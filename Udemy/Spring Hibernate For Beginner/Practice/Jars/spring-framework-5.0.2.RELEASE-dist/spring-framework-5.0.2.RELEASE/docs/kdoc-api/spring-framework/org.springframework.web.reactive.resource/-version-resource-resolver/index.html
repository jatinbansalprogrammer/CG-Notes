<HTML>
<HEAD>
<meta charset="UTF-8">
<title>VersionResourceResolver - spring-framework</title>
<link rel="stylesheet" href="../../../style.css">
</HEAD>
<BODY>
<a href="../../index.html">spring-framework</a>&nbsp;/&nbsp;<a href="../index.html">org.springframework.web.reactive.resource</a>&nbsp;/&nbsp;<a href=".">VersionResourceResolver</a><br/>
<br/>
<h1>VersionResourceResolver</h1>
<code><span class="keyword">open</span> <span class="keyword">class </span><span class="identifier">VersionResourceResolver</span>&nbsp;<span class="symbol">:</span>&nbsp;<span class="identifier">AbstractResourceResolver</span></code>
<p>Resolves request paths containing a version string that can be used as part of an HTTP caching strategy in which a resource is cached with a date in the distant future (e.g. 1 year) and cached until the version, and therefore the URL, is changed. 
<p>Different versioning strategies exist, and this resolver must be configured with one or more such strategies along with path mappings to indicate which strategy applies to which resources. </p>
<p><code>ContentVersionStrategy</code> is a good default choice except in cases where it cannot be used. Most notably the <code>ContentVersionStrategy</code> cannot be combined with JavaScript module loaders. For such cases the <code>FixedVersionStrategy</code> is a better choice. </p>
<p>Note that using this resolver to serve CSS files means that the CssLinkResourceTransformer should also be used in order to modify links within CSS files to also contain the appropriate versions generated by this resolver.</p>
</p>
<p><strong>Author</strong><br/>
Rossen Stoyanchev</p>
<p><strong>Author</strong><br/>
Brian Clozel</p>
<p><strong>Since</strong><br/>
5.0</p>
<p><strong>See Also</strong><br/>
VersionStrategy</p>
<h3>Constructors</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="-init-.html">&lt;init&gt;</a></p>
</td>
<td>
<code><span class="identifier">VersionResourceResolver</span><span class="symbol">(</span><span class="symbol">)</span></code>
<p>Resolves request paths containing a version string that can be used as part of an HTTP caching strategy in which a resource is cached with a date in the distant future (e.g. 1 year) and cached until the version, and therefore the URL, is changed. 
<p>Different versioning strategies exist, and this resolver must be configured with one or more such strategies along with path mappings to indicate which strategy applies to which resources. </p>
<p><code>ContentVersionStrategy</code> is a good default choice except in cases where it cannot be used. Most notably the <code>ContentVersionStrategy</code> cannot be combined with JavaScript module loaders. For such cases the <code>FixedVersionStrategy</code> is a better choice. </p>
<p>Note that using this resolver to serve CSS files means that the CssLinkResourceTransformer should also be used in order to modify links within CSS files to also contain the appropriate versions generated by this resolver.</p>
</p>
</td>
</tr>
</tbody>
</table>
<h3>Functions</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="add-content-version-strategy.html">addContentVersionStrategy</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">addContentVersionStrategy</span><span class="symbol">(</span><span class="keyword">vararg</span> <span class="identifier" id="org.springframework.web.reactive.resource.VersionResourceResolver$addContentVersionStrategy(kotlin.Array((kotlin.String)))/pathPatterns">pathPatterns</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">VersionResourceResolver</span></code>
<p>Insert a content-based version in resource URLs that match the given path patterns. The version is computed from the content of the file, e.g. <code>"css/main-e36d2e05253c6c7085a91522ce43a0b4.css"</code>. This is a good default strategy to use except when it cannot be, for example when using JavaScript module loaders, use <code><a href="#">#addFixedVersionStrategy</a></code> instead for serving JavaScript files.</p>
</td>
</tr>
<tr>
<td>
<p><a href="add-fixed-version-strategy.html">addFixedVersionStrategy</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">addFixedVersionStrategy</span><span class="symbol">(</span><span class="identifier" id="org.springframework.web.reactive.resource.VersionResourceResolver$addFixedVersionStrategy(kotlin.String, kotlin.Array((kotlin.String)))/version">version</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">, </span><span class="keyword">vararg</span> <span class="identifier" id="org.springframework.web.reactive.resource.VersionResourceResolver$addFixedVersionStrategy(kotlin.String, kotlin.Array((kotlin.String)))/pathPatterns">pathPatterns</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">VersionResourceResolver</span></code>
<p>Insert a fixed, prefix-based version in resource URLs that match the given path patterns, for example: <code>"{version}/js/main.js"</code>. This is useful (vs. content-based versions) when using JavaScript module loaders. 
<p>The version may be a random number, the current date, or a value fetched from a git commit sha, a property file, or environment variable and set with SpEL expressions in the configuration (e.g. see <code>@Value</code> in Java config). </p>
<p>If not done already, variants of the given <code>pathPatterns</code>, prefixed with the <code>version</code> will be also configured. For example, adding a <code>"/js/**"</code> path pattern will also cofigure automatically a <code>"/v1.0.0/js/**"</code> with <code>"v1.0.0"</code> the <code>version</code> String given as an argument.</p>
</p>
</td>
</tr>
<tr>
<td>
<p><a href="add-version-strategy.html">addVersionStrategy</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">addVersionStrategy</span><span class="symbol">(</span><span class="identifier" id="org.springframework.web.reactive.resource.VersionResourceResolver$addVersionStrategy(org.springframework.web.reactive.resource.VersionStrategy, kotlin.Array((kotlin.String)))/strategy">strategy</span><span class="symbol">:</span>&nbsp;<a href="../-version-strategy/index.html"><span class="identifier">VersionStrategy</span></a><span class="symbol">, </span><span class="keyword">vararg</span> <span class="identifier" id="org.springframework.web.reactive.resource.VersionResourceResolver$addVersionStrategy(org.springframework.web.reactive.resource.VersionStrategy, kotlin.Array((kotlin.String)))/pathPatterns">pathPatterns</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">VersionResourceResolver</span></code>
<p>Register a custom VersionStrategy to apply to resource URLs that match the given path patterns.</p>
</td>
</tr>
<tr>
<td>
<p><a href="get-strategy-map.html">getStrategyMap</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">getStrategyMap</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-mutable-map/index.html"><span class="identifier">MutableMap</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">,</span>&nbsp;<a href="../-version-strategy/index.html"><span class="identifier">VersionStrategy</span></a><span class="symbol">&gt;</span></code>
<p>Return the map with version strategies keyed by path pattern.</p>
</td>
</tr>
<tr>
<td>
<p><a href="set-strategy-map.html">setStrategyMap</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">setStrategyMap</span><span class="symbol">(</span><span class="identifier" id="org.springframework.web.reactive.resource.VersionResourceResolver$setStrategyMap(kotlin.collections.MutableMap((kotlin.String, org.springframework.web.reactive.resource.VersionStrategy)))/map">map</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-mutable-map/index.html"><span class="identifier">MutableMap</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">,</span>&nbsp;<a href="../-version-strategy/index.html"><span class="identifier">VersionStrategy</span></a><span class="symbol">&gt;</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code>
<p>Set a Map with URL paths as keys and <code>VersionStrategy</code> as values. 
<p>Supports direct URL matches and Ant-style pattern matches. For syntax details, see the AntPathMatcher javadoc.</p>
</p>
</td>
</tr>
</tbody>
</table>
</BODY>
</HTML>
