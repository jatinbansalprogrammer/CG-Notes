<HTML>
<HEAD>
<meta charset="UTF-8">
<title>EntityManagerFactoryAccessor - spring-framework</title>
<link rel="stylesheet" href="../../../style.css">
</HEAD>
<BODY>
<a href="../../index.html">spring-framework</a>&nbsp;/&nbsp;<a href="../index.html">org.springframework.orm.jpa</a>&nbsp;/&nbsp;<a href=".">EntityManagerFactoryAccessor</a><br/>
<br/>
<h1>EntityManagerFactoryAccessor</h1>
<code><span class="keyword">abstract</span> <span class="keyword">class </span><span class="identifier">EntityManagerFactoryAccessor</span>&nbsp;<span class="symbol">:</span>&nbsp;<span class="identifier">BeanFactoryAware</span></code>
<p>Base class for any class that needs to access a JPA EntityManagerFactory, usually in order to obtain a JPA EntityManager. Defines common properties.</p>
<p><strong>Author</strong><br/>
Juergen Hoeller</p>
<p><strong>Since</strong><br/>
2.0</p>
<p><strong>See Also</strong><br/>
EntityManagerFactoryUtils</p>
<h3>Constructors</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="-init-.html">&lt;init&gt;</a></p>
</td>
<td>
<code><span class="identifier">EntityManagerFactoryAccessor</span><span class="symbol">(</span><span class="symbol">)</span></code>
<p>Base class for any class that needs to access a JPA EntityManagerFactory, usually in order to obtain a JPA EntityManager. Defines common properties.</p>
</td>
</tr>
</tbody>
</table>
<h3>Functions</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="get-entity-manager-factory.html">getEntityManagerFactory</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">getEntityManagerFactory</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><span class="identifier">EntityManagerFactory</span></code>
<p>Return the JPA EntityManagerFactory that should be used to create EntityManagers.</p>
</td>
</tr>
<tr>
<td>
<p><a href="get-jpa-property-map.html">getJpaPropertyMap</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">getJpaPropertyMap</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-mutable-map/index.html"><span class="identifier">MutableMap</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">,</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html"><span class="identifier">Any</span></a><span class="symbol">&gt;</span></code>
<p>Allow Map access to the JPA properties to be passed to the persistence provider, with the option to add or override specific entries. 
<p>Useful for specifying entries directly, for example via "jpaPropertyMap[myKey]".</p>
</p>
</td>
</tr>
<tr>
<td>
<p><a href="get-persistence-unit-name.html">getPersistenceUnitName</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">getPersistenceUnitName</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a></code>
<p>Return the name of the persistence unit to access the EntityManagerFactory for, if any.</p>
</td>
</tr>
<tr>
<td>
<p><a href="set-bean-factory.html">setBeanFactory</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">setBeanFactory</span><span class="symbol">(</span><span class="identifier" id="org.springframework.orm.jpa.EntityManagerFactoryAccessor$setBeanFactory(org.springframework.beans.factory.BeanFactory)/beanFactory">beanFactory</span><span class="symbol">:</span>&nbsp;<span class="identifier">BeanFactory</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code>
<p>Retrieves an EntityManagerFactory by persistence unit name, if none set explicitly. Falls back to a default EntityManagerFactory bean if no persistence unit specified.</p>
</td>
</tr>
<tr>
<td>
<p><a href="set-entity-manager-factory.html">setEntityManagerFactory</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">setEntityManagerFactory</span><span class="symbol">(</span><span class="identifier" id="org.springframework.orm.jpa.EntityManagerFactoryAccessor$setEntityManagerFactory(javax.persistence.EntityManagerFactory)/emf">emf</span><span class="symbol">:</span>&nbsp;<span class="identifier">EntityManagerFactory</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code>
<p>Set the JPA EntityManagerFactory that should be used to create EntityManagers.</p>
</td>
</tr>
<tr>
<td>
<p><a href="set-jpa-properties.html">setJpaProperties</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">setJpaProperties</span><span class="symbol">(</span><span class="identifier" id="org.springframework.orm.jpa.EntityManagerFactoryAccessor$setJpaProperties(java.util.Properties)/jpaProperties">jpaProperties</span><span class="symbol">:</span>&nbsp;<span class="identifier">Properties</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code>
<p>Specify JPA properties, to be passed into <code>EntityManagerFactory.createEntityManager(Map)</code> (if any). 
<p>Can be populated with a String "value" (parsed via PropertiesEditor) or a "props" element in XML bean definitions.</p>
</p>
</td>
</tr>
<tr>
<td>
<p><a href="set-jpa-property-map.html">setJpaPropertyMap</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">setJpaPropertyMap</span><span class="symbol">(</span><span class="identifier" id="org.springframework.orm.jpa.EntityManagerFactoryAccessor$setJpaPropertyMap(kotlin.collections.MutableMap((kotlin.String, kotlin.Any)))/jpaProperties">jpaProperties</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/-mutable-map/index.html"><span class="identifier">MutableMap</span></a><span class="symbol">&lt;</span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">,</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html"><span class="identifier">Any</span></a><span class="symbol">&gt;</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code>
<p>Specify JPA properties as a Map, to be passed into <code>EntityManagerFactory.createEntityManager(Map)</code> (if any). 
<p>Can be populated with a "map" or "props" element in XML bean definitions.</p>
</p>
</td>
</tr>
<tr>
<td>
<p><a href="set-persistence-unit-name.html">setPersistenceUnitName</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">setPersistenceUnitName</span><span class="symbol">(</span><span class="identifier" id="org.springframework.orm.jpa.EntityManagerFactoryAccessor$setPersistenceUnitName(kotlin.String)/persistenceUnitName">persistenceUnitName</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code>
<p>Set the name of the persistence unit to access the EntityManagerFactory for. 
<p>This is an alternative to specifying the EntityManagerFactory by direct reference, resolving it by its persistence unit name instead. If no EntityManagerFactory and no persistence unit name have been specified, a default EntityManagerFactory will be retrieved through finding a single unique bean of type EntityManagerFactory.</p>
</p>
</td>
</tr>
</tbody>
</table>
<h3>Inheritors</h3>
<table>
<tbody>
<tr>
<td>
<p><a href="../../org.springframework.orm.jpa.vendor/-hibernate-jpa-session-factory-bean/index.html">HibernateJpaSessionFactoryBean</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">class </span><span class="identifier">HibernateJpaSessionFactoryBean</span>&nbsp;<span class="symbol">:</span>&nbsp;<span class="identifier">EntityManagerFactoryAccessor</span><span class="symbol">, </span><span class="identifier">FactoryBean</span><span class="symbol">&lt;</span><span class="identifier">SessionFactory</span><span class="symbol">&gt;</span></code>
<p>Simple <code>FactoryBean</code> that exposes the underlying SessionFactory behind a Hibernate-backed JPA EntityManagerFactory. 
<p>Primarily available for resolving a SessionFactory by JPA persistence unit name via the <code><a href="#">"persistenceUnitName"</a></code> bean property. </p>
<p>Note that, for straightforward cases, you could also simply declare a factory method: </p>
<pre><code> &lt;bean id="sessionFactory" factory-bean="entityManagerFactory" factory-method="getSessionFactory"/&gt; </code></pre> 
<p>And as of JPA 2.1, <code><a href="#">EntityManagerFactory#unwrap</a></code> provides a nice approach as well, in particular within configuration class arrangements: </p>
<pre><code> @Bean public SessionFactory sessionFactory(@Qualifier("entityManagerFactory") EntityManagerFactory emf) { return emf.unwrap(SessionFactory.class); } </code></pre> Please note: Since Hibernate 5.2 changed its <code>SessionFactory</code> interface to extend JPA's <code>EntityManagerFactory</code>, you may get conflicts when injecting by type, with both the original factory and your custom <code>SessionFactory</code> matching <code>EntityManagerFactory</code>. An explicit qualifier for the original factory (as indicated above) is recommended here.</p>
</td>
</tr>
<tr>
<td>
<p><a href="../../org.springframework.orm.jpa.support/-open-entity-manager-in-view-interceptor/index.html">OpenEntityManagerInViewInterceptor</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">class </span><span class="identifier">OpenEntityManagerInViewInterceptor</span>&nbsp;<span class="symbol">:</span>&nbsp;<span class="identifier">EntityManagerFactoryAccessor</span><span class="symbol">, </span><span class="identifier">AsyncWebRequestInterceptor</span></code>
<p>Spring web request interceptor that binds a JPA EntityManager to the thread for the entire processing of the request. Intended for the "Open EntityManager in View" pattern, i.e. to allow for lazy loading in web views despite the original transactions already being completed. 
<p>This interceptor makes JPA EntityManagers available via the current thread, which will be autodetected by transaction managers. It is suitable for service layer transactions via org.springframework.orm.jpa.JpaTransactionManager or org.springframework.transaction.jta.JtaTransactionManager as well as for non-transactional read-only execution. </p>
<p>In contrast to OpenEntityManagerInViewFilter, this interceptor is set up in a Spring application context and can thus take advantage of bean wiring.</p>
</p>
</td>
</tr>
<tr>
<td>
<p><a href="../../org.springframework.orm.jpa.support/-shared-entity-manager-bean/index.html">SharedEntityManagerBean</a></p>
</td>
<td>
<code><span class="keyword">open</span> <span class="keyword">class </span><span class="identifier">SharedEntityManagerBean</span>&nbsp;<span class="symbol">:</span>&nbsp;<span class="identifier">EntityManagerFactoryAccessor</span><span class="symbol">, </span><span class="identifier">FactoryBean</span><span class="symbol">&lt;</span><span class="identifier">EntityManager</span><span class="symbol">&gt;</span><span class="symbol">, </span><span class="identifier">InitializingBean</span></code>
<p>FactoryBean that exposes a shared JPA javax.persistence.EntityManager reference for a given EntityManagerFactory. Typically used for an EntityManagerFactory created by org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean, as direct alternative to a JNDI lookup for a Java EE server's EntityManager reference. 
<p>The shared EntityManager will behave just like an EntityManager fetched from an application server's JNDI environment, as defined by the JPA specification. It will delegate all calls to the current transactional EntityManager, if any; otherwise, it will fall back to a newly created EntityManager per operation. </p>
<p>Can be passed to DAOs that expect a shared EntityManager reference rather than an EntityManagerFactory. Note that Spring's org.springframework.orm.jpa.JpaTransactionManager always needs an EntityManagerFactory in order to create new transactional EntityManager instances.</p>
</p>
</td>
</tr>
</tbody>
</table>
</BODY>
</HTML>
